//
// Copyright © 2015-2018 Anker Innovations Technology Limited All Rights Reserved.
// The program and materials is not free. Without our permission, any use, including but not limited to reproduction, retransmission, communication, display, mirror, download, modification, is expressly prohibited. Otherwise, it will be pursued for legal liability.
// 
//  FFExerciseModelService.swift
//  FultureFit
//
//  Created by ANKER on 2019/6/22.
//  Copyright © 2019 PDP-ACC. All rights reserved.
//
	

import UIKit

class FFExerciseModelService: NSObject {
    
    let bleConnectStatusKeyPath = "bleConnectStatus" // BLE连接状态
    weak var delegate: FFExerciseModelServiceDelegate!
    var mStartTime = 0
    var mSpendTime = 0
    var mFinishTime = 0
    var mFlagEnd2K = false
    var mCurIndex = -1
    // 第一种电压缓慢上升和下降的数组游标
    var mCurSlowlyOnIndex = -1
    var mCurSlowlyOffIndex = -1
    // 第二种电压缓慢上升和下降的数组游标
    var mCurSlowlyOn2Index = -1
    var mCurSlowlyOff2Index = -1
    var mFlagShowPowerSeekBar = false
    var mFlagStop = true // 启动了开始指令还是停止指令，方便给暂停和回复操作时做出判断
    var mFlagPauseDone = false
    
    
    let TIME_FOR_2K = 9500
    let MSG_SHOW_TIME = 8001 // 倒计时刷新
    let MSG_SET_POWER1 = 8002 // 第1组电压值
    let MSG_SET_POWER2 = 8003 // 第2组电压值
    let MSG_SET_POWER3 = 8004 // 第3组电压值
    let MSG_SET_POWER4 = 8005 // 第4组电压值
    let MSG_SET_POWER5 = 8006 // 第5组电压值
    let MSG_SET_POWER6 = 8007 // 第6组电压值
    let MSG_SET_POWER7 = 8008 // 第7组电压值
    let MSG_SET_POWER8 = 8009 // 第8组电压值
    let MSG_SET_POWER9 = 8010 // 第9组电压值
    let MSG_SET_POWER10 = 8011 // 第10组电压值
    let MSG_SET_CTRL1 = 8012 // 左侧5组开关状态
    let MSG_SET_CTRL2 = 8013 // 右侧5组开关状态
    let MSG_INIT_EXTEND = 8014 // 全部初始化完成后的通知
    let MSG_STOP = 8017 // 倒计时结束
    let MSG_TOAST = 8018 // 提示语
    
    // Command
    
    
    let mInit = Data([0x74, 0x65, 0x00, 0x75]) // 健身设备启动指令
    let mDeInit = Data([0x74, 0x66, 0x00, 0x75]) // 健身设备结束指令
    let mInitExtend = Data([0x74, 0x67, 0x00, 0x75]) // 健身设备启动并发送完各种参数之后的通知指令
    let mDeInitExtend = Data([0x74, 0x68, 0x00, 0x75]) // 健身设备结束指令2，和通知指令对应
    let mAllPowerAddOne = Data([0x74, 0x51, 0x00, 0x75]) // 10组电压整体加1发送到设备端的指令
    let mAllPowerDecOne = Data([0x74, 0x52, 0x00, 0x75]) // 10组电压整体减1发送到设备端的指令
    
    // 10组电压单独调节发送到设备端的指令
    var mPowerValueArray: [Data] = [Data([0x74, 0x2d, 0x01, 0x75]),
                                    Data([0x74, 0x2e, 0x01, 0x75]),
                                    Data([0x74, 0x2f, 0x01, 0x75]),
                                    Data([0x74, 0x30, 0x01, 0x75]),
                                    Data([0x74, 0x31, 0x01, 0x75]),
                                    Data([0x74, 0x32, 0x01, 0x75]),
                                    Data([0x74, 0x33, 0x01, 0x75]),
                                    Data([0x74, 0x34, 0x01, 0x75]),
                                    Data([0x74, 0x35, 0x01, 0x75]),
                                    Data([0x74, 0x36, 0x01, 0x75])]
    // 2K相关指令，从开始计算到10秒后发送2K停止命令，以及这10秒期间特殊的暂停恢复指令
    let mEnd2K = Data([0x74, 0x53, 0x00, 0x75])
    let mPause2K = Data([0x74, 0x54, 0x00, 0x75])
    let mResume2K = Data([0x74, 0x55, 0x00, 0x75])
    
    // 电压缓慢上升和下降指令
    let mSlowlyOn = Data([0x74, 0x41, 0x00, 0x75])
    let mSlowlyOff = Data([0x74, 0x42, 0x00, 0x75])
    
    ///////////////////////////////////////////////////////////////////////////////////////////////////////
    // 力量训练
    let mStrengthOn1 = Data([0x74, 0x03, 0x01, 0x75])
    let mStrengthOff1 = Data([0x74, 0x03, 0x02, 0x75])
    let mStrengthOn2 = Data([0x74, 0x03, 0x03, 0x75])
    let mStrengthOff2 = Data([0x74, 0x03, 0x04, 0x75])
    let mStrengthOn3 = Data([0x74, 0x03, 0x05, 0x75])
    let mStrengthOff3 = Data([0x74, 0x03, 0x06, 0x75])
    let mStrengthOn4 = Data([0x74, 0x03, 0x07, 0x75])
    let mStrengthOff4 = Data([0x74, 0x03, 0x08, 0x75])
    let mStrengthOn5 = Data([0x74, 0x03, 0x09, 0x75])
    let mStrengthOff5 = Data([0x74, 0x03, 0x0A, 0x75])
    let mStrengthOn6 = Data([0x74, 0x03, 0x0B, 0x75])
    let mStrengthOff6 = Data([0x74, 0x03, 0x0C, 0x75])
    
    // 小阶段的时间点
    let mStrengthSubStepTime = [
        0, 60000, 360000, 600000, 900000, 1140000
    ]
    
    // 电压缓慢上升的时间点
    let mStrengthSlowlyOnTime = [
        10300, 60300, 360300, 600300, 900300, 1140300
    ]
    
    // 电压缓慢下降的时间点
    let mStrengthSlowlyOffTime = [
        56000, 356000, 595000, 897000, 1136000, 1196000
    ]
    
    // 每个具体动作的时间点
    let mStrengthTime = [
        //Step1 1
        [1000, 0x11], [2000, 0x20], [8000, 0x42], [9000, 0x80],
        [10000, 0x11], [11000, 0x20], [58000, 0x42], [59000, 0x80],
        
        //Step2 2~6
        [60000, 0x11], [61000, 0x20], [64000, 0x42], [65000, 0x80],
        [66000, 0x11], [67000, 0x20], [70000, 0x42], [71000, 0x80],
        [72000, 0x11], [73000, 0x20], [76000, 0x42], [77000, 0x80],
        [78000, 0x11], [79000, 0x20], [82000, 0x42], [83000, 0x80],
        [84000, 0x11], [85000, 0x20], [88000, 0x42], [89000, 0x80],
        [90000, 0x11], [91000, 0x20], [94000, 0x42], [95000, 0x80],
        [96000, 0x11], [97000, 0x20], [100000, 0x42], [101000, 0x80],
        [102000, 0x11], [103000, 0x20], [106000, 0x42], [107000, 0x80],
        [108000, 0x11], [109000, 0x20], [112000, 0x42], [113000, 0x80],
        [114000, 0x11], [115000, 0x20], [118000, 0x42], [119000, 0x80],
        
        [120000, 0x11], [121000, 0x20], [124000, 0x42], [125000, 0x80],
        [126000, 0x11], [127000, 0x20], [130000, 0x42], [131000, 0x80],
        [132000, 0x11], [133000, 0x20], [136000, 0x42], [137000, 0x80],
        [138000, 0x11], [139000, 0x20], [142000, 0x42], [143000, 0x80],
        [144000, 0x11], [145000, 0x20], [148000, 0x42], [149000, 0x80],
        [150000, 0x11], [151000, 0x20], [154000, 0x42], [155000, 0x80],
        [156000, 0x11], [157000, 0x20], [160000, 0x42], [161000, 0x80],
        [162000, 0x11], [163000, 0x20], [166000, 0x42], [167000, 0x80],
        [168000, 0x11], [169000, 0x20], [172000, 0x42], [173000, 0x80],
        [174000, 0x11], [175000, 0x20], [178000, 0x42], [179000, 0x80],
        
        [180000, 0x11], [181000, 0x20], [184000, 0x42], [185000, 0x80],
        [186000, 0x11], [187000, 0x20], [190000, 0x42], [191000, 0x80],
        [192000, 0x11], [193000, 0x20], [196000, 0x42], [197000, 0x80],
        [198000, 0x11], [199000, 0x20], [202000, 0x42], [203000, 0x80],
        [204000, 0x11], [205000, 0x20], [208000, 0x42], [209000, 0x80],
        [210000, 0x11], [211000, 0x20], [214000, 0x42], [215000, 0x80],
        [216000, 0x11], [217000, 0x20], [220000, 0x42], [221000, 0x80],
        [222000, 0x11], [223000, 0x20], [226000, 0x42], [227000, 0x80],
        [228000, 0x11], [229000, 0x20], [232000, 0x42], [233000, 0x80],
        [234000, 0x11], [235000, 0x20], [238000, 0x42], [239000, 0x80],
        
        [240000, 0x11], [241000, 0x20], [244000, 0x42], [245000, 0x80],
        [246000, 0x11], [247000, 0x20], [250000, 0x42], [251000, 0x80],
        [252000, 0x11], [253000, 0x20], [256000, 0x42], [257000, 0x80],
        [258000, 0x11], [259000, 0x20], [262000, 0x42], [263000, 0x80],
        [264000, 0x11], [265000, 0x20], [268000, 0x42], [269000, 0x80],
        [270000, 0x11], [271000, 0x20], [274000, 0x42], [275000, 0x80],
        [276000, 0x11], [277000, 0x20], [280000, 0x42], [281000, 0x80],
        [282000, 0x11], [283000, 0x20], [286000, 0x42], [287000, 0x80],
        [288000, 0x11], [289000, 0x20], [292000, 0x42], [293000, 0x80],
        [294000, 0x11], [295000, 0x20], [298000, 0x42], [299000, 0x80],
        
        [300000, 0x11], [301000, 0x20], [304000, 0x42], [305000, 0x80],
        [306000, 0x11], [307000, 0x20], [310000, 0x42], [311000, 0x80],
        [312000, 0x11], [313000, 0x20], [316000, 0x42], [317000, 0x80],
        [318000, 0x11], [319000, 0x20], [322000, 0x42], [323000, 0x80],
        [324000, 0x11], [325000, 0x20], [328000, 0x42], [329000, 0x80],
        [330000, 0x11], [331000, 0x20], [334000, 0x42], [335000, 0x80],
        [336000, 0x11], [337000, 0x20], [340000, 0x42], [341000, 0x80],
        [342000, 0x11], [343000, 0x20], [346000, 0x42], [347000, 0x80],
        [348000, 0x11], [349000, 0x20], [352000, 0x42], [353000, 0x80],
        [354000, 0x11], [355000, 0x20], [358000, 0x42], [359000, 0x80],
        
        //Step3 7~10
        [360000, 0x11], [361000, 0x20], [369000, 0x42], [370000, 0x80],
        [372000, 0x11], [373000, 0x20], [381000, 0x42], [382000, 0x80],
        [384000, 0x11], [385000, 0x20], [393000, 0x42], [394000, 0x80],
        [396000, 0x11], [397000, 0x20], [405000, 0x42], [406000, 0x80],
        [408000, 0x11], [409000, 0x20], [417000, 0x42], [418000, 0x80],
        
        [420000, 0x11], [421000, 0x20], [429000, 0x42], [430000, 0x80],
        [432000, 0x11], [433000, 0x20], [441000, 0x42], [442000, 0x80],
        [444000, 0x11], [445000, 0x20], [453000, 0x42], [454000, 0x80],
        [456000, 0x11], [457000, 0x20], [465000, 0x42], [466000, 0x80],
        [468000, 0x11], [469000, 0x20], [477000, 0x42], [478000, 0x80],
        
        [480000, 0x11], [481000, 0x20], [489000, 0x42], [490000, 0x80],
        [492000, 0x11], [493000, 0x20], [501000, 0x42], [502000, 0x80],
        [504000, 0x11], [505000, 0x20], [513000, 0x42], [514000, 0x80],
        [516000, 0x11], [517000, 0x20], [525000, 0x42], [526000, 0x80],
        [528000, 0x11], [529000, 0x20], [537000, 0x42], [538000, 0x80],
        
        [540000, 0x11], [541000, 0x20], [549000, 0x42], [550000, 0x80],
        [552000, 0x11], [553000, 0x20], [561000, 0x42], [562000, 0x80],
        [564000, 0x11], [565000, 0x20], [573000, 0x42], [574000, 0x80],
        [576000, 0x11], [577000, 0x20], [585000, 0x42], [586000, 0x80],
        [588000, 0x11], [589000, 0x20], [597000, 0x42], [598000, 0x80],
        
        //Step4 11~15
        [600000, 0x11], [601000, 0x20], [605000, 0x42],
        [606000, 0x11], [607000, 0x20], [611000, 0x42],
        [612000, 0x11], [613000, 0x20], [617000, 0x42],
        [618000, 0x11], [619000, 0x20], [623000, 0x42],
        [624000, 0x11], [625000, 0x20], [629000, 0x42],
        [630000, 0x11], [631000, 0x20], [635000, 0x42],
        [636000, 0x11], [637000, 0x20], [641000, 0x42],
        [642000, 0x11], [643000, 0x20], [647000, 0x42],
        [648000, 0x11], [649000, 0x20], [653000, 0x42],
        [654000, 0x11], [655000, 0x20], [659000, 0x42],
        
        [660000, 0x11], [661000, 0x20], [665000, 0x42],
        [666000, 0x11], [667000, 0x20], [671000, 0x42],
        [672000, 0x11], [673000, 0x20], [677000, 0x42],
        [678000, 0x11], [679000, 0x20], [683000, 0x42],
        [684000, 0x11], [685000, 0x20], [689000, 0x42],
        [690000, 0x11], [691000, 0x20], [695000, 0x42],
        [696000, 0x11], [697000, 0x20], [701000, 0x42],
        [702000, 0x11], [703000, 0x20], [707000, 0x42],
        [708000, 0x11], [709000, 0x20], [713000, 0x42],
        [714000, 0x11], [715000, 0x20], [719000, 0x42],
        
        [720000, 0x11], [721000, 0x20], [725000, 0x42],
        [726000, 0x11], [727000, 0x20], [731000, 0x42],
        [732000, 0x11], [733000, 0x20], [737000, 0x42],
        [738000, 0x11], [739000, 0x20], [743000, 0x42],
        [744000, 0x11], [745000, 0x20], [749000, 0x42],
        [750000, 0x11], [751000, 0x20], [755000, 0x42],
        [756000, 0x11], [757000, 0x20], [761000, 0x42],
        [762000, 0x11], [763000, 0x20], [767000, 0x42],
        [768000, 0x11], [769000, 0x20], [773000, 0x42],
        [774000, 0x11], [775000, 0x20], [779000, 0x42],
        
        [780000, 0x11], [781000, 0x20], [785000, 0x42],
        [786000, 0x11], [787000, 0x20], [791000, 0x42],
        [792000, 0x11], [793000, 0x20], [797000, 0x42],
        [798000, 0x11], [799000, 0x20], [803000, 0x42],
        [804000, 0x11], [805000, 0x20], [809000, 0x42],
        [810000, 0x11], [811000, 0x20], [815000, 0x42],
        [816000, 0x11], [817000, 0x20], [821000, 0x42],
        [822000, 0x11], [823000, 0x20], [827000, 0x42],
        [828000, 0x11], [829000, 0x20], [833000, 0x42],
        [834000, 0x11], [835000, 0x20], [839000, 0x42],
        
        [840000, 0x11], [841000, 0x20], [845000, 0x42],
        [846000, 0x11], [847000, 0x20], [851000, 0x42],
        [852000, 0x11], [853000, 0x20], [857000, 0x42],
        [858000, 0x11], [859000, 0x20], [863000, 0x42],
        [864000, 0x11], [865000, 0x20], [869000, 0x42],
        [870000, 0x11], [871000, 0x20], [875000, 0x42],
        [876000, 0x11], [877000, 0x20], [881000, 0x42],
        [882000, 0x11], [883000, 0x20], [887000, 0x42],
        [888000, 0x11], [889000, 0x20], [893000, 0x42],
        [894000, 0x11], [895000, 0x20], [899000, 0x42],
        
        //Step5 16~19
        [900000, 0x11], [901000, 0x20], [904000, 0x42], [905000, 0x80],
        [906000, 0x11], [907000, 0x20], [910000, 0x42], [911000, 0x80],
        [912000, 0x11], [913000, 0x20], [916000, 0x42], [917000, 0x80],
        [918000, 0x11], [919000, 0x20], [922000, 0x42], [923000, 0x80],
        [924000, 0x11], [925000, 0x20], [928000, 0x42], [929000, 0x80],
        [930000, 0x11], [931000, 0x20], [934000, 0x42], [935000, 0x80],
        [936000, 0x11], [937000, 0x20], [940000, 0x42], [941000, 0x80],
        [942000, 0x11], [943000, 0x20], [946000, 0x42], [947000, 0x80],
        [948000, 0x11], [949000, 0x20], [952000, 0x42], [953000, 0x80],
        [954000, 0x11], [955000, 0x20], [958000, 0x42], [959000, 0x80],
        
        [960000, 0x11], [961000, 0x20], [964000, 0x42], [965000, 0x80],
        [966000, 0x11], [967000, 0x20], [970000, 0x42], [971000, 0x80],
        [972000, 0x11], [973000, 0x20], [976000, 0x42], [977000, 0x80],
        [978000, 0x11], [979000, 0x20], [982000, 0x42], [983000, 0x80],
        [984000, 0x11], [985000, 0x20], [988000, 0x42], [989000, 0x80],
        [990000, 0x11], [991000, 0x20], [994000, 0x42], [995000, 0x80],
        [996000, 0x11], [997000, 0x20], [1000000, 0x42], [1001000, 0x80],
        [1002000, 0x11], [1003000, 0x20], [1006000, 0x42], [1007000, 0x80],
        [1008000, 0x11], [1009000, 0x20], [1012000, 0x42], [1013000, 0x80],
        [1014000, 0x11], [1015000, 0x20], [1018000, 0x42], [1019000, 0x80],
        
        [1020000, 0x11], [1021000, 0x20], [1024000, 0x42], [1025000, 0x80],
        [1026000, 0x11], [1027000, 0x20], [1030000, 0x42], [1031000, 0x80],
        [1032000, 0x11], [1033000, 0x20], [1036000, 0x42], [1037000, 0x80],
        [1038000, 0x11], [1039000, 0x20], [1042000, 0x42], [1043000, 0x80],
        [1044000, 0x11], [1045000, 0x20], [1048000, 0x42], [1049000, 0x80],
        [1050000, 0x11], [1051000, 0x20], [1054000, 0x42], [1055000, 0x80],
        [1056000, 0x11], [1057000, 0x20], [1060000, 0x42], [1061000, 0x80],
        [1062000, 0x11], [1063000, 0x20], [1066000, 0x42], [1067000, 0x80],
        [1068000, 0x11], [1069000, 0x20], [1072000, 0x42], [1073000, 0x80],
        [1074000, 0x11], [1075000, 0x20], [1078000, 0x42], [1079000, 0x80],
        
        [1080000, 0x11], [1081000, 0x20], [1084000, 0x42], [1085000, 0x80],
        [1086000, 0x11], [1087000, 0x20], [1090000, 0x42], [1091000, 0x80],
        [1092000, 0x11], [1093000, 0x20], [1096000, 0x42], [1097000, 0x80],
        [1098000, 0x11], [1099000, 0x20], [1102000, 0x42], [1103000, 0x80],
        [1104000, 0x11], [1105000, 0x20], [1108000, 0x42], [1109000, 0x80],
        [1110000, 0x11], [1111000, 0x20], [1114000, 0x42], [1115000, 0x80],
        [1116000, 0x11], [1117000, 0x20], [1120000, 0x42], [1121000, 0x80],
        [1122000, 0x11], [1123000, 0x20], [1126000, 0x42], [1127000, 0x80],
        [1128000, 0x11], [1129000, 0x20], [1132000, 0x42], [1133000, 0x80],
        [1134000, 0x11], [1135000, 0x20], [1138000, 0x42], [1139000, 0x80],
        
        //Step6 20
        [1140000, 0x11], [1141000, 0x20], [1198000, 0x42], [1199000, 0x80],
        
        //End DeInit
        [1200000, 0x00]
    ]
    ///////////////////////////////////////////////////////////////////////////////////////////////////////
    // 耐力训练
    let mNaiLiOn1 = Data([0x74, 0x05, 0x01, 0x75])
    let mNaiLiOff1 = Data([0x74, 0x05, 0x02, 0x75])
    let mNaiLiOn2 = Data([0x74, 0x05, 0x03, 0x75])
    let mNaiLiOff2 = Data([0x74, 0x05, 0x04, 0x75])
    let mNaiLiOn3 = Data([0x74, 0x05, 0x05, 0x75])
    let mNaiLiOff3 = Data([0x74, 0x05, 0x06, 0x75])
    let mNaiLiOn4 = Data([0x74, 0x05, 0x07, 0x75])
    let mNaiLiOff4 = Data([0x74, 0x05, 0x08, 0x75])
    let mNaiLiOn5 = Data([0x74, 0x05, 0x09, 0x75])
    let mNaiLiOff5 = Data([0x74, 0x05, 0x0A, 0x75])
    let mNaiLiOn6 = Data([0x74, 0x05, 0x0B, 0x75])
    let mNaiLiOff6 = Data([0x74, 0x05, 0x0C, 0x75])
    let mNaiLiOn7 = Data([0x74, 0x05, 0x0D, 0x75])
    let mNaiLiOff7 = Data([0x74, 0x05, 0x0E, 0x75])
    let mNaiLiOn8 = Data([0x74, 0x05, 0x0F, 0x75])
    let mNaiLiOff8 = Data([0x74, 0x05, 0x10, 0x75])
    let mNaiLiOn9 = Data([0x74, 0x05, 0x11, 0x75])
    let mNaiLiOff9 = Data([0x74, 0x05, 0x12, 0x75])
    let mNaiLiOn10 = Data([0x74, 0x05, 0x13, 0x75])
    let mNaiLiOff10 = Data([0x74, 0x05, 0x14, 0x75])
    let mNaiLiOn11 = Data([0x74, 0x05, 0x15, 0x75])
    let mNaiLiOff11 = Data([0x74, 0x05, 0x16, 0x75])
    let mNaiLiOn12 = Data([0x74, 0x05, 0x17, 0x75])
    let mNaiLiOff12 = Data([0x74, 0x05, 0x18, 0x75])
    let mNaiLiOn13 = Data([0x74, 0x05, 0x19, 0x75])
    let mNaiLiOff13 = Data([0x74, 0x05, 0x1A, 0x75])
    let mNaiLiSubStepTime = [
        0, 180000, 240000, 300000, 360000, 420000, 480000, 540000, 660000, 720000, 840000, 960000, 1080000
    ]
    let mNaiLiSlowlyOnTime = [
        10300, 180300, 240300, 300300, 360300, 420300, 480300, 540300, 660300, 720300, 840300, 960300, 1080300
    ]
    let mNaiLiSlowlyOffTime = [
        176000, 236000, 295000, 356000, 415000, 476000, 535000, 657000, 716000, 835000, 956000, 1077000, 1197000
    ]
    
    // 每个具体动作的时间点
    let mNaiLiTime = [
        // Step1 1~3
        [1000, 0x11], [2000, 0x20], [8000, 0x42], [9000, 0x80],
        [10000, 0x11], [11000, 0x20], [18000, 0x42], [19000, 0x80],
        [20000, 0x11], [21000, 0x20], [23000, 0x42], [24000, 0x80],
        [25000, 0x11], [26000, 0x20], [28000, 0x42], [29000, 0x80],
        [30000, 0x11], [31000, 0x20], [33000, 0x42], [34000, 0x80],
        [35000, 0x11], [36000, 0x20], [38000, 0x42], [39000, 0x80],
        [40000, 0x11], [41000, 0x20], [43000, 0x42], [44000, 0x80],
        [45000, 0x11], [46000, 0x20], [48000, 0x42], [49000, 0x80],
        [50000, 0x11], [51000, 0x20], [53000, 0x42], [54000, 0x80],
        [55000, 0x11], [56000, 0x20], [58000, 0x42], [59000, 0x80],
        
        [60000, 0x11], [61000, 0x20], [63000, 0x42], [64000, 0x80],
        [65000, 0x11], [66000, 0x20], [68000, 0x42], [69000, 0x80],
        [70000, 0x11], [71000, 0x20], [73000, 0x42], [74000, 0x80],
        [75000, 0x11], [76000, 0x20], [78000, 0x42], [79000, 0x80],
        [80000, 0x11], [81000, 0x20], [83000, 0x42], [84000, 0x80],
        [85000, 0x11], [86000, 0x20], [88000, 0x42], [89000, 0x80],
        [90000, 0x11], [91000, 0x20], [93000, 0x42], [94000, 0x80],
        [95000, 0x11], [96000, 0x20], [98000, 0x42], [99000, 0x80],
        [100000, 0x11], [101000, 0x20], [103000, 0x42], [104000, 0x80],
        [105000, 0x11], [106000, 0x20], [108000, 0x42], [109000, 0x80],
        [110000, 0x11], [111000, 0x20], [113000, 0x42], [114000, 0x80],
        [115000, 0x11], [116000, 0x20], [118000, 0x42], [119000, 0x80],
        
        [120000, 0x11], [121000, 0x20], [123000, 0x42], [124000, 0x80],
        [125000, 0x11], [126000, 0x20], [128000, 0x42], [129000, 0x80],
        [130000, 0x11], [131000, 0x20], [133000, 0x42], [134000, 0x80],
        [135000, 0x11], [136000, 0x20], [138000, 0x42], [139000, 0x80],
        [140000, 0x11], [141000, 0x20], [143000, 0x42], [144000, 0x80],
        [145000, 0x11], [146000, 0x20], [148000, 0x42], [149000, 0x80],
        [150000, 0x11], [151000, 0x20], [153000, 0x42], [154000, 0x80],
        [155000, 0x11], [156000, 0x20], [158000, 0x42], [159000, 0x80],
        [160000, 0x11], [161000, 0x20], [163000, 0x42], [164000, 0x80],
        [165000, 0x11], [166000, 0x20], [168000, 0x42], [169000, 0x80],
        [170000, 0x11], [171000, 0x20], [178000, 0x42], [179000, 0x80],
        
        // Step2 4
        [180000, 0x11], [181000, 0x20], [238000, 0x42], [239000, 0x80],
        
        // Step3 5
        [240000, 0x11], [241000, 0x20], [249000, 0x42], [250000, 0x80],
        [252000, 0x11], [253000, 0x20], [261000, 0x42], [262000, 0x80],
        [264000, 0x11], [265000, 0x20], [273000, 0x42], [274000, 0x80],
        [276000, 0x11], [277000, 0x20], [285000, 0x42], [286000, 0x80],
        [288000, 0x11], [289000, 0x20], [297000, 0x42], [298000, 0x80],
        
        // Step4 6
        [300000, 0x11], [301000, 0x20], [358000, 0x42], [359000, 0x80],
        
        // Step5 7
        [360000, 0x11], [361000, 0x20], [369000, 0x42], [370000, 0x80],
        [372000, 0x11], [373000, 0x20], [381000, 0x42], [382000, 0x80],
        [384000, 0x11], [385000, 0x20], [393000, 0x42], [394000, 0x80],
        [396000, 0x11], [397000, 0x20], [405000, 0x42], [406000, 0x80],
        [408000, 0x11], [409000, 0x20], [417000, 0x42], [418000, 0x80],
        
        // Step6 8
        [420000, 0x11], [421000, 0x20], [478000, 0x42], [479000, 0x80],
        
        // Step7 9
        [480000, 0x11], [481000, 0x20], [489000, 0x42], [490000, 0x80],
        [492000, 0x11], [493000, 0x20], [501000, 0x42], [502000, 0x80],
        [504000, 0x11], [505000, 0x20], [513000, 0x42], [514000, 0x80],
        [516000, 0x11], [517000, 0x20], [525000, 0x42], [526000, 0x80],
        [528000, 0x11], [529000, 0x20], [537000, 0x42], [538000, 0x80],
        
        // Step8 10~11
        [540000, 0x11], [541000, 0x20], [545000, 0x42],
        [546000, 0x11], [547000, 0x20], [548000, 0x42],
        [549000, 0x11], [550000, 0x20], [551000, 0x42],
        [552000, 0x11], [553000, 0x20], [554000, 0x42],
        [555000, 0x11], [556000, 0x20], [557000, 0x42],
        [558000, 0x11], [559000, 0x20], [560000, 0x42],
        [561000, 0x11], [562000, 0x20], [563000, 0x42],
        [564000, 0x11], [565000, 0x20], [566000, 0x42],
        [567000, 0x11], [568000, 0x20], [569000, 0x42],
        [570000, 0x11], [571000, 0x20], [572000, 0x42],
        [573000, 0x11], [574000, 0x20], [575000, 0x42],
        [576000, 0x11], [577000, 0x20], [578000, 0x42],
        [579000, 0x11], [580000, 0x20], [581000, 0x42],
        [582000, 0x11], [583000, 0x20], [584000, 0x42],
        [585000, 0x11], [586000, 0x20], [587000, 0x42],
        [588000, 0x11], [589000, 0x20], [590000, 0x42],
        [591000, 0x11], [592000, 0x20], [593000, 0x42],
        [594000, 0x11], [595000, 0x20], [596000, 0x42],
        [597000, 0x11], [598000, 0x20], [599000, 0x42],
        
        [600000, 0x11], [601000, 0x20], [602000, 0x42],
        [603000, 0x11], [604000, 0x20], [605000, 0x42],
        [606000, 0x11], [607000, 0x20], [608000, 0x42],
        [609000, 0x11], [610000, 0x20], [611000, 0x42],
        [612000, 0x11], [613000, 0x20], [614000, 0x42],
        [615000, 0x11], [616000, 0x20], [617000, 0x42],
        [618000, 0x11], [619000, 0x20], [620000, 0x42],
        [621000, 0x11], [622000, 0x20], [623000, 0x42],
        [624000, 0x11], [625000, 0x20], [626000, 0x42],
        [627000, 0x11], [628000, 0x20], [629000, 0x42],
        [630000, 0x11], [631000, 0x20], [632000, 0x42],
        [633000, 0x11], [634000, 0x20], [635000, 0x42],
        [636000, 0x11], [637000, 0x20], [638000, 0x42],
        [639000, 0x11], [640000, 0x20], [641000, 0x42],
        [642000, 0x11], [643000, 0x20], [644000, 0x42],
        [645000, 0x11], [646000, 0x20], [647000, 0x42],
        [648000, 0x11], [649000, 0x20], [650000, 0x42],
        [651000, 0x11], [652000, 0x20], [653000, 0x42],
        [654000, 0x11], [655000, 0x20], [659000, 0x42],
        
        // Step9 12
        [660000, 0x11], [661000, 0x20], [718000, 0x42], [719000, 0x80],
        
        // Step10 13~14
        [720000, 0x11], [721000, 0x20], [727000, 0x42], [728000, 0x80],
        [730000, 0x11], [731000, 0x20], [737000, 0x42], [738000, 0x80],
        [740000, 0x11], [741000, 0x20], [747000, 0x42], [748000, 0x80],
        [750000, 0x11], [751000, 0x20], [757000, 0x42], [758000, 0x80],
        [760000, 0x11], [761000, 0x20], [767000, 0x42], [768000, 0x80],
        [770000, 0x11], [771000, 0x20], [777000, 0x42], [778000, 0x80],
        
        [780000, 0x11], [781000, 0x20], [787000, 0x42], [788000, 0x80],
        [790000, 0x11], [791000, 0x20], [797000, 0x42], [798000, 0x80],
        [800000, 0x11], [801000, 0x20], [807000, 0x42], [808000, 0x80],
        [810000, 0x11], [811000, 0x20], [817000, 0x42], [818000, 0x80],
        [820000, 0x11], [821000, 0x20], [827000, 0x42], [828000, 0x80],
        [830000, 0x11], [831000, 0x20], [837000, 0x42], [838000, 0x80],
        
        // Step11 15~16
        [840000, 0x11], [841000, 0x20], [844000, 0x42], [845000, 0x80],
        [840000, 0x11], [841000, 0x20], [844000, 0x42], [845000, 0x80],
        [846000, 0x11], [847000, 0x20], [850000, 0x42], [851000, 0x80],
        [852000, 0x11], [853000, 0x20], [856000, 0x42], [857000, 0x80],
        [858000, 0x11], [859000, 0x20], [862000, 0x42], [863000, 0x80],
        [864000, 0x11], [865000, 0x20], [868000, 0x42], [869000, 0x80],
        [870000, 0x11], [871000, 0x20], [874000, 0x42], [875000, 0x80],
        [876000, 0x11], [877000, 0x20], [880000, 0x42], [881000, 0x80],
        [882000, 0x11], [883000, 0x20], [886000, 0x42], [887000, 0x80],
        [888000, 0x11], [889000, 0x20], [892000, 0x42], [893000, 0x80],
        [894000, 0x11], [895000, 0x20], [898000, 0x42], [899000, 0x80],
        
        [900000, 0x11], [901000, 0x20], [904000, 0x42], [905000, 0x80],
        [906000, 0x11], [907000, 0x20], [910000, 0x42], [911000, 0x80],
        [912000, 0x11], [913000, 0x20], [916000, 0x42], [917000, 0x80],
        [918000, 0x11], [919000, 0x20], [922000, 0x42], [923000, 0x80],
        [924000, 0x11], [925000, 0x20], [928000, 0x42], [929000, 0x80],
        [930000, 0x11], [931000, 0x20], [934000, 0x42], [935000, 0x80],
        [936000, 0x11], [937000, 0x20], [940000, 0x42], [941000, 0x80],
        [942000, 0x11], [943000, 0x20], [946000, 0x42], [947000, 0x80],
        [948000, 0x11], [949000, 0x20], [952000, 0x42], [953000, 0x80],
        [954000, 0x11], [955000, 0x20], [958000, 0x42], [959000, 0x80],
        
        // Step12 17~18
        [960000, 0x11], [961000, 0x20], [965000, 0x42],
        [966000, 0x11], [967000, 0x20], [968000, 0x42],
        [969000, 0x11], [970000, 0x20], [971000, 0x42],
        [972000, 0x11], [973000, 0x20], [974000, 0x42],
        [975000, 0x11], [976000, 0x20], [977000, 0x42],
        [978000, 0x11], [979000, 0x20], [980000, 0x42],
        [981000, 0x11], [982000, 0x20], [983000, 0x42],
        [984000, 0x11], [985000, 0x20], [986000, 0x42],
        [987000, 0x11], [988000, 0x20], [989000, 0x42],
        [990000, 0x11], [991000, 0x20], [992000, 0x42],
        [993000, 0x11], [994000, 0x20], [995000, 0x42],
        [996000, 0x11], [997000, 0x20], [998000, 0x42],
        [999000, 0x11], [1000000, 0x20], [1001000, 0x42],
        [1002000, 0x11], [1003000, 0x20], [1004000, 0x42],
        [1005000, 0x11], [1006000, 0x20], [1007000, 0x42],
        [1008000, 0x11], [1009000, 0x20], [1010000, 0x42],
        [1011000, 0x11], [1012000, 0x20], [1013000, 0x42],
        [1014000, 0x11], [1015000, 0x20], [1016000, 0x42],
        [1017000, 0x11], [1018000, 0x20], [1019000, 0x42],
        
        [1020000, 0x11], [1021000, 0x20], [1022000, 0x42],
        [1023000, 0x11], [1024000, 0x20], [1025000, 0x42],
        [1026000, 0x11], [1027000, 0x20], [1028000, 0x42],
        [1029000, 0x11], [1030000, 0x20], [1031000, 0x42],
        [1032000, 0x11], [1033000, 0x20], [1034000, 0x42],
        [1035000, 0x11], [1036000, 0x20], [1037000, 0x42],
        [1038000, 0x11], [1039000, 0x20], [1040000, 0x42],
        [1041000, 0x11], [1042000, 0x20], [1043000, 0x42],
        [1044000, 0x11], [1045000, 0x20], [1046000, 0x42],
        [1047000, 0x11], [1048000, 0x20], [1049000, 0x42],
        [1050000, 0x11], [1051000, 0x20], [1052000, 0x42],
        [1053000, 0x11], [1054000, 0x20], [1055000, 0x42],
        [1056000, 0x11], [1057000, 0x20], [1058000, 0x42],
        [1059000, 0x11], [1060000, 0x20], [1061000, 0x42],
        [1062000, 0x11], [1063000, 0x20], [1064000, 0x42],
        [1065000, 0x11], [1066000, 0x20], [1067000, 0x42],
        [1068000, 0x11], [1069000, 0x20], [1070000, 0x42],
        [1071000, 0x11], [1072000, 0x20], [1073000, 0x42],
        [1074000, 0x11], [1075000, 0x20], [1079000, 0x42],
        
        // Step13 19~20
        [1080000, 0x11], [1081000, 0x20], [1085000, 0x42],
        [1086000, 0x11], [1087000, 0x20], [1088000, 0x42],
        [1089000, 0x11], [1090000, 0x20], [1091000, 0x42],
        [1092000, 0x11], [1093000, 0x20], [1094000, 0x42],
        [1095000, 0x11], [1096000, 0x20], [1097000, 0x42],
        [1098000, 0x11], [1099000, 0x20], [1100000, 0x42],
        [1101000, 0x11], [1102000, 0x20], [1103000, 0x42],
        [1104000, 0x11], [1105000, 0x20], [1106000, 0x42],
        [1107000, 0x11], [1108000, 0x20], [1109000, 0x42],
        [1110000, 0x11], [1111000, 0x20], [1112000, 0x42],
        [1113000, 0x11], [1114000, 0x20], [1115000, 0x42],
        [1116000, 0x11], [1117000, 0x20], [1118000, 0x42],
        [1119000, 0x11], [1120000, 0x20], [1121000, 0x42],
        [1122000, 0x11], [1123000, 0x20], [1124000, 0x42],
        [1125000, 0x11], [1126000, 0x20], [1127000, 0x42],
        [1128000, 0x11], [1129000, 0x20], [1130000, 0x42],
        [1131000, 0x11], [1132000, 0x20], [1133000, 0x42],
        [1134000, 0x11], [1135000, 0x20], [1136000, 0x42],
        [1137000, 0x11], [1138000, 0x20], [1139000, 0x42],
        
        [1140000, 0x11], [1141000, 0x20], [1142000, 0x42],
        [1143000, 0x11], [1144000, 0x20], [1145000, 0x42],
        [1146000, 0x11], [1147000, 0x20], [1148000, 0x42],
        [1149000, 0x11], [1150000, 0x20], [1151000, 0x42],
        [1152000, 0x11], [1153000, 0x20], [1154000, 0x42],
        [1155000, 0x11], [1156000, 0x20], [1157000, 0x42],
        [1158000, 0x11], [1159000, 0x20], [1160000, 0x42],
        [1161000, 0x11], [1162000, 0x20], [1163000, 0x42],
        [1164000, 0x11], [1165000, 0x20], [1166000, 0x42],
        [1167000, 0x11], [1168000, 0x20], [1169000, 0x42],
        [1170000, 0x11], [1171000, 0x20], [1172000, 0x42],
        [1173000, 0x11], [1174000, 0x20], [1175000, 0x42],
        [1176000, 0x11], [1177000, 0x20], [1178000, 0x42],
        [1179000, 0x11], [1180000, 0x20], [1181000, 0x42],
        [1182000, 0x11], [1183000, 0x20], [1184000, 0x42],
        [1185000, 0x11], [1186000, 0x20], [1187000, 0x42],
        [1188000, 0x11], [1189000, 0x20], [1190000, 0x42],
        [1191000, 0x11], [1192000, 0x20], [1193000, 0x42],
        [1194000, 0x11], [1195000, 0x20], [1199000, 0x42],
        
        //End DeInit
        [1200000, 0x00]
    ]
    
    
    ///////////////////////////////////////////////////////////////////////////////////////////////////////
    // 肌肉增长
    let mJiRouOn1 = Data([0x74, 0x06, 0x01, 0x75])
    let mJiRouOff1 = Data([0x74, 0x06, 0x02, 0x75])
    let mJiRouOn2 = Data([0x74, 0x06, 0x03, 0x75])
    let mJiRouOff2 = Data([0x74, 0x06, 0x04, 0x75])
    let mJiRouOn3 = Data([0x74, 0x06, 0x05, 0x75])
    let mJiRouOff3 = Data([0x74, 0x06, 0x06, 0x75])
    let mJiRouOn4 = Data([0x74, 0x06, 0x07, 0x75])
    let mJiRouOff4 = Data([0x74, 0x06, 0x08, 0x75])
    let mJiRouOn5 = Data([0x74, 0x06, 0x09, 0x75])
    let mJiRouOff5 = Data([0x74, 0x06, 0x0A, 0x75])
    let mJiRouOn6 = Data([0x74, 0x06, 0x0B, 0x75])
    let mJiRouOff6 = Data([0x74, 0x06, 0x0C, 0x75])
    let mJiRouOn7 = Data([0x74, 0x06, 0x0D, 0x75])
    let mJiRouOff7 = Data([0x74, 0x06, 0x0E, 0x75])
    let mJiRouOn8 = Data([0x74, 0x06, 0x0F, 0x75])
    let mJiRouOff8 = Data([0x74, 0x06, 0x10, 0x75])
    
    // 小阶段的时间点
    let mJiRouSubStepTime = [
        0, 60000, 180000, 420000, 600000, 720000, 900000, 1080000
    ]
    
    // 第1种电压缓慢上升的时间点
    let mJiRouSlowlyOnTime = [
        10300, 60300, 180300, 420300, 600300, 720300, 900300, 1080300
    ]
    
    // 第1种电压缓慢下降的时间点
    let mJiRouSlowlyOffTime = [
        56000, 173000, 413000, 595000, 716000, 895000, 1077000, 1196000
    ]
    /*
     // 第2种电压缓慢上升的时间点
     private final int[] mJiRouSlowly2OnTime = {
     180300, 210300, 240300, 270300, 300300, 330300, 360300, 390300,
     420300, 450300, 480300, 510300, 540300, 570300,
     720300, 750300, 780300, 810300, 840300, 870300,
     900300, 930300, 960300, 990300, 1020300, 1050300
     };
     
     // 第2种电压缓慢下降的时间点
     private final int[] mJiRouSlowly2OffTime = {
     202100, 232100, 262100, 292100, 322100, 352100, 382100, 412100,
     442100, 472100, 502100, 532100, 562100, 592100,
     742100, 772100, 802100, 832100, 862100, 892100,
     922100, 952100, 982100, 1012100, 1042100, 1072100
     };
     */
    // 每个具体动作的时间点
    let mJiRouTime = [
        // Step1 1
        [1000, 0x11], [2000, 0x20], [8000, 0x42], [9000, 0x80],
        [10000, 0x11], [11000, 0x20], [58000, 0x42], [59000, 0x80],
        
        // Step2 2~3
        [60000, 0x11], [61000, 0x20], [70000, 0x42], [71000, 0x80],
        [75000, 0x11], [76000, 0x20], [85000, 0x42], [86000, 0x80],
        [90000, 0x11], [91000, 0x20], [100000, 0x42], [101000, 0x80],
        [105000, 0x11], [106000, 0x20], [115000, 0x42], [116000, 0x80],
        
        [120000, 0x11], [121000, 0x20], [130000, 0x42], [131000, 0x80],
        [135000, 0x11], [136000, 0x20], [145000, 0x42], [146000, 0x80],
        [150000, 0x11], [151000, 0x20], [160000, 0x42], [161000, 0x80],
        [165000, 0x11], [166000, 0x20], [175000, 0x42], [176000, 0x80],
        
        // Step3 4~7
        [180000, 0x11], [181000, 0x20], [190000, 0x42], [191000, 0x80],
        [195000, 0x11], [196000, 0x20], [205000, 0x42], [206000, 0x80],
        [210000, 0x11], [211000, 0x20], [220000, 0x42], [221000, 0x80],
        [225000, 0x11], [226000, 0x20], [235000, 0x42], [236000, 0x80],
        
        [240000, 0x11], [241000, 0x20], [250000, 0x42], [251000, 0x80],
        [255000, 0x11], [256000, 0x20], [265000, 0x42], [266000, 0x80],
        [270000, 0x11], [271000, 0x20], [280000, 0x42], [281000, 0x80],
        [285000, 0x11], [286000, 0x20], [295000, 0x42], [296000, 0x80],
        
        [300000, 0x11], [301000, 0x20], [310000, 0x42], [311000, 0x80],
        [315000, 0x11], [316000, 0x20], [325000, 0x42], [326000, 0x80],
        [330000, 0x11], [331000, 0x20], [340000, 0x42], [341000, 0x80],
        [345000, 0x11], [346000, 0x20], [355000, 0x42], [356000, 0x80],
        
        [360000, 0x11], [361000, 0x20], [370000, 0x42], [371000, 0x80],
        [375000, 0x11], [376000, 0x20], [385000, 0x42], [386000, 0x80],
        [390000, 0x11], [391000, 0x20], [400000, 0x42], [401000, 0x80],
        [405000, 0x11], [406000, 0x20], [415000, 0x42], [416000, 0x80],
        
        // Step4 8~10
        [420000, 0x11], [421000, 0x20], [427000, 0x42], [428000, 0x80],
        [430000, 0x11], [431000, 0x20], [437000, 0x42], [438000, 0x80],
        [440000, 0x11], [441000, 0x20], [447000, 0x42], [448000, 0x80],
        [450000, 0x11], [451000, 0x20], [457000, 0x42], [458000, 0x80],
        [460000, 0x11], [461000, 0x20], [467000, 0x42], [468000, 0x80],
        [470000, 0x11], [471000, 0x20], [477000, 0x42], [478000, 0x80],
        
        [480000, 0x11], [481000, 0x20], [487000, 0x42], [488000, 0x80],
        [490000, 0x11], [491000, 0x20], [497000, 0x42], [498000, 0x80],
        [500000, 0x11], [501000, 0x20], [507000, 0x42], [508000, 0x80],
        [510000, 0x11], [511000, 0x20], [517000, 0x42], [518000, 0x80],
        [520000, 0x11], [521000, 0x20], [527000, 0x42], [528000, 0x80],
        [530000, 0x11], [531000, 0x20], [537000, 0x42], [538000, 0x80],
        
        [540000, 0x11], [541000, 0x20], [547000, 0x42], [548000, 0x80],
        [550000, 0x11], [551000, 0x20], [557000, 0x42], [558000, 0x80],
        [560000, 0x11], [561000, 0x20], [567000, 0x42], [568000, 0x80],
        [570000, 0x11], [571000, 0x20], [577000, 0x42], [578000, 0x80],
        [580000, 0x11], [581000, 0x20], [587000, 0x42], [588000, 0x80],
        [590000, 0x11], [591000, 0x20], [597000, 0x42], [598000, 0x80],
        
        // Step5 11~12
        [600000, 0x11], [601000, 0x20], [718000, 0x42], [719000, 0x80],
        
        // Step6 13~15
        [720000, 0x11], [721000, 0x20], [727000, 0x42], [728000, 0x80],
        [730000, 0x11], [731000, 0x20], [737000, 0x42], [738000, 0x80],
        [740000, 0x11], [741000, 0x20], [747000, 0x42], [748000, 0x80],
        [750000, 0x11], [751000, 0x20], [757000, 0x42], [758000, 0x80],
        [760000, 0x11], [761000, 0x20], [767000, 0x42], [768000, 0x80],
        [770000, 0x11], [771000, 0x20], [777000, 0x42], [778000, 0x80],
        
        [780000, 0x11], [781000, 0x20], [787000, 0x42], [788000, 0x80],
        [790000, 0x11], [791000, 0x20], [797000, 0x42], [798000, 0x80],
        [800000, 0x11], [801000, 0x20], [807000, 0x42], [808000, 0x80],
        [810000, 0x11], [811000, 0x20], [817000, 0x42], [818000, 0x80],
        [820000, 0x11], [821000, 0x20], [827000, 0x42], [828000, 0x80],
        [830000, 0x11], [831000, 0x20], [837000, 0x42], [838000, 0x80],
        
        [840000, 0x11], [841000, 0x20], [847000, 0x42], [848000, 0x80],
        [850000, 0x11], [851000, 0x20], [857000, 0x42], [858000, 0x80],
        [860000, 0x11], [861000, 0x20], [867000, 0x42], [868000, 0x80],
        [870000, 0x11], [871000, 0x20], [877000, 0x42], [878000, 0x80],
        [880000, 0x11], [881000, 0x20], [887000, 0x42], [888000, 0x80],
        [890000, 0x11], [891000, 0x20], [897000, 0x42], [898000, 0x80],
        
        // Step7 16~18
        [900000, 0x11], [901000, 0x20], [905000, 0x42],
        [906000, 0x11], [907000, 0x20], [911000, 0x42],
        [912000, 0x11], [913000, 0x20], [917000, 0x42],
        [918000, 0x11], [919000, 0x20], [923000, 0x42],
        [924000, 0x11], [925000, 0x20], [929000, 0x42],
        [930000, 0x11], [931000, 0x20], [935000, 0x42],
        [936000, 0x11], [937000, 0x20], [941000, 0x42],
        [942000, 0x11], [943000, 0x20], [947000, 0x42],
        [948000, 0x11], [949000, 0x20], [953000, 0x42],
        [954000, 0x11], [955000, 0x20], [959000, 0x42],
        
        [960000, 0x11], [961000, 0x20], [965000, 0x42],
        [966000, 0x11], [967000, 0x20], [971000, 0x42],
        [972000, 0x11], [973000, 0x20], [977000, 0x42],
        [978000, 0x11], [979000, 0x20], [983000, 0x42],
        [984000, 0x11], [985000, 0x20], [989000, 0x42],
        [990000, 0x11], [991000, 0x20], [995000, 0x42],
        [996000, 0x11], [997000, 0x20], [1001000, 0x42],
        [1002000, 0x11], [1003000, 0x20], [1007000, 0x42],
        [1008000, 0x11], [1009000, 0x20], [1013000, 0x42],
        [1014000, 0x11], [1015000, 0x20], [1019000, 0x42],
        
        [1020000, 0x11], [1021000, 0x20], [1025000, 0x42],
        [1026000, 0x11], [1027000, 0x20], [1031000, 0x42],
        [1032000, 0x11], [1033000, 0x20], [1037000, 0x42],
        [1038000, 0x11], [1039000, 0x20], [1043000, 0x42],
        [1044000, 0x11], [1045000, 0x20], [1049000, 0x42],
        [1050000, 0x11], [1051000, 0x20], [1055000, 0x42],
        [1056000, 0x11], [1057000, 0x20], [1061000, 0x42],
        [1062000, 0x11], [1063000, 0x20], [1067000, 0x42],
        [1068000, 0x11], [1069000, 0x20], [1073000, 0x42],
        [1074000, 0x11], [1075000, 0x20], [1079000, 0x42],
        
        // Step8 19~20
        [1080000, 0x11], [1081000, 0x20], [1198000, 0x42], [1199000, 0x80],
        
        //End DeInit
        [1200000, 0x00]
    ]
    
    
    //////////////////////////////////////////////////////////////////////////////////////////////////
    // 脂肪燃烧
    let mFatBurnOn1 = Data([0x74, 0x04, 0x01, 0x75])
    let mFatBurnOff1 = Data([0x74, 0x04, 0x02, 0x75])
    let mFatBurnOn2 = Data([0x74, 0x04, 0x03, 0x75])
    let mFatBurnOff2 = Data([0x74, 0x04, 0x04, 0x75])
    let mFatBurnOn3 = Data([0x74, 0x04, 0x05, 0x75])
    let mFatBurnOff3 = Data([0x74, 0x04, 0x06, 0x75])
    let mFatBurnOn4 = Data([0x74, 0x04, 0x07, 0x75])
    let mFatBurnOff4 = Data([0x74, 0x04, 0x08, 0x75])
    let mFatBurnOn5 = Data([0x74, 0x04, 0x09, 0x75])
    let mFatBurnOff5 = Data([0x74, 0x04, 0x0A, 0x75])
    let mFatBurnOn6 = Data([0x74, 0x04, 0x0B, 0x75])
    let mFatBurnOff6 = Data([0x74, 0x04, 0x0C, 0x75])
    let mFatBurnOn7 = Data([0x74, 0x04, 0x0D, 0x75])
    let mFatBurnOff7 = Data([0x74, 0x04, 0x0E, 0x75])
    let mFatBurnOn8 = Data([0x74, 0x04, 0x0F, 0x75])
    let mFatBurnOff8 = Data([0x74, 0x04, 0x10, 0x75])
    let mFatBurnOn9 = Data([0x74, 0x04, 0x11, 0x75])
    let mFatBurnOff9 = Data([0x74, 0x04, 0x12, 0x75])
    let mFatBurnSubStepTime = [
        0, 120000, 300000, 420000, 600000, 720000, 840000, 1020000, 1140000
    ]
    let mFatBurnSlowlyOnTime = [
        10300, 120300, 300300, 420300, 600300, 720300, 840300, 1020300, 1140300
    ]
    let mFatBurnSlowlyOffTime = [
        116000, 293000, 416000, 593000, 716000, 833000, 1016000, 1133000, 1196000
    ]
    let mFatBurnTime = [
        //Step1 1~2
        [1000, 0x11], [2000, 0x20], [8000, 0x42], [9000, 0x80],
        [10000, 0x11], [11000, 0x20], [16000, 0x42], [17000, 0x80],
        [18000, 0x11], [19000, 0x20], [22000, 0x42], [23000, 0x80],
        [24000, 0x11], [25000, 0x20], [28000, 0x42], [29000, 0x80],
        [30000, 0x11], [31000, 0x20], [34000, 0x42], [35000, 0x80],
        [36000, 0x11], [37000, 0x20], [40000, 0x42], [41000, 0x80],
        [42000, 0x11], [43000, 0x20], [46000, 0x42], [47000, 0x80],
        [48000, 0x11], [49000, 0x20], [52000, 0x42], [53000, 0x80],
        [54000, 0x11], [55000, 0x20], [58000, 0x42], [59000, 0x80],
        
        [60000, 0x11], [61000, 0x20], [64000, 0x42], [65000, 0x80],
        [66000, 0x11], [67000, 0x20], [70000, 0x42], [71000, 0x80],
        [72000, 0x11], [73000, 0x20], [76000, 0x42], [77000, 0x80],
        [78000, 0x11], [79000, 0x20], [82000, 0x42], [83000, 0x80],
        [84000, 0x11], [85000, 0x20], [88000, 0x42], [89000, 0x80],
        [90000, 0x11], [91000, 0x20], [94000, 0x42], [95000, 0x80],
        [96000, 0x11], [97000, 0x20], [100000, 0x42], [101000, 0x80],
        [102000, 0x11], [103000, 0x20], [106000, 0x42], [107000, 0x80],
        [108000, 0x11], [109000, 0x20], [112000, 0x42], [113000, 0x80],
        [114000, 0x11], [115000, 0x20], [118000, 0x42], [119000, 0x80],
        
        //Step2 3~5
        [120000, 0x11], [121000, 0x20], [130000, 0x42], [131000, 0x80],
        [135000, 0x11], [136000, 0x20], [145000, 0x42], [146000, 0x80],
        [150000, 0x11], [151000, 0x20], [160000, 0x42], [161000, 0x80],
        [165000, 0x11], [166000, 0x20], [175000, 0x42], [176000, 0x80],
        
        [180000, 0x11], [181000, 0x20], [190000, 0x42], [191000, 0x80],
        [195000, 0x11], [196000, 0x20], [205000, 0x42], [206000, 0x80],
        [210000, 0x11], [211000, 0x20], [220000, 0x42], [221000, 0x80],
        [225000, 0x11], [226000, 0x20], [235000, 0x42], [236000, 0x80],
        
        [240000, 0x11], [241000, 0x20], [250000, 0x42], [251000, 0x80],
        [255000, 0x11], [256000, 0x20], [265000, 0x42], [266000, 0x80],
        [270000, 0x11], [271000, 0x20], [280000, 0x42], [281000, 0x80],
        [285000, 0x11], [286000, 0x20], [295000, 0x42], [296000, 0x80],
        
        //Step3 6~7
        [300000, 0x11], [301000, 0x20], [304000, 0x42], [305000, 0x80],
        [306000, 0x11], [307000, 0x20], [310000, 0x42], [311000, 0x80],
        [312000, 0x11], [313000, 0x20], [316000, 0x42], [317000, 0x80],
        [318000, 0x11], [319000, 0x20], [322000, 0x42], [323000, 0x80],
        [324000, 0x11], [325000, 0x20], [328000, 0x42], [329000, 0x80],
        [330000, 0x11], [331000, 0x20], [334000, 0x42], [335000, 0x80],
        [336000, 0x11], [337000, 0x20], [340000, 0x42], [341000, 0x80],
        [342000, 0x11], [343000, 0x20], [346000, 0x42], [347000, 0x80],
        [348000, 0x11], [349000, 0x20], [352000, 0x42], [353000, 0x80],
        [354000, 0x11], [355000, 0x20], [358000, 0x42], [359000, 0x80],
        
        [360000, 0x11], [361000, 0x20], [364000, 0x42], [365000, 0x80],
        [366000, 0x11], [367000, 0x20], [370000, 0x42], [371000, 0x80],
        [372000, 0x11], [373000, 0x20], [376000, 0x42], [377000, 0x80],
        [378000, 0x11], [379000, 0x20], [382000, 0x42], [383000, 0x80],
        [384000, 0x11], [385000, 0x20], [388000, 0x42], [389000, 0x80],
        [390000, 0x11], [391000, 0x20], [394000, 0x42], [395000, 0x80],
        [396000, 0x11], [397000, 0x20], [400000, 0x42], [401000, 0x80],
        [402000, 0x11], [403000, 0x20], [406000, 0x42], [407000, 0x80],
        [408000, 0x11], [409000, 0x20], [412000, 0x42], [413000, 0x80],
        [414000, 0x11], [415000, 0x20], [418000, 0x42], [419000, 0x80],
        
        //Step4 8~10
        [420000, 0x11], [421000, 0x20], [430000, 0x42], [431000, 0x80],
        [435000, 0x11], [436000, 0x20], [445000, 0x42], [446000, 0x80],
        [450000, 0x11], [451000, 0x20], [460000, 0x42], [461000, 0x80],
        [465000, 0x11], [466000, 0x20], [475000, 0x42], [476000, 0x80],
        
        [480000, 0x11], [481000, 0x20], [490000, 0x42], [491000, 0x80],
        [495000, 0x11], [496000, 0x20], [505000, 0x42], [506000, 0x80],
        [510000, 0x11], [511000, 0x20], [520000, 0x42], [521000, 0x80],
        [525000, 0x11], [526000, 0x20], [535000, 0x42], [536000, 0x80],
        
        [540000, 0x11], [541000, 0x20], [550000, 0x42], [551000, 0x80],
        [555000, 0x11], [556000, 0x20], [565000, 0x42], [566000, 0x80],
        [570000, 0x11], [571000, 0x20], [580000, 0x42], [581000, 0x80],
        [585000, 0x11], [586000, 0x20], [595000, 0x42], [596000, 0x80],
        
        //Step5 11~12
        [600000, 0x11], [601000, 0x20], [604000, 0x42], [605000, 0x80],
        [606000, 0x11], [607000, 0x20], [610000, 0x42], [611000, 0x80],
        [612000, 0x11], [613000, 0x20], [616000, 0x42], [617000, 0x80],
        [618000, 0x11], [619000, 0x20], [622000, 0x42], [623000, 0x80],
        [624000, 0x11], [625000, 0x20], [628000, 0x42], [629000, 0x80],
        [630000, 0x11], [631000, 0x20], [634000, 0x42], [635000, 0x80],
        [636000, 0x11], [637000, 0x20], [640000, 0x42], [641000, 0x80],
        [642000, 0x11], [643000, 0x20], [646000, 0x42], [647000, 0x80],
        [648000, 0x11], [649000, 0x20], [652000, 0x42], [653000, 0x80],
        [654000, 0x11], [655000, 0x20], [658000, 0x42], [659000, 0x80],
        
        [660000, 0x11], [661000, 0x20], [664000, 0x42], [665000, 0x80],
        [666000, 0x11], [667000, 0x20], [670000, 0x42], [671000, 0x80],
        [672000, 0x11], [673000, 0x20], [676000, 0x42], [677000, 0x80],
        [678000, 0x11], [679000, 0x20], [682000, 0x42], [683000, 0x80],
        [684000, 0x11], [685000, 0x20], [688000, 0x42], [689000, 0x80],
        [690000, 0x11], [691000, 0x20], [694000, 0x42], [695000, 0x80],
        [696000, 0x11], [697000, 0x20], [700000, 0x42], [701000, 0x80],
        [702000, 0x11], [703000, 0x20], [706000, 0x42], [707000, 0x80],
        [708000, 0x11], [709000, 0x20], [712000, 0x42], [713000, 0x80],
        [714000, 0x11], [715000, 0x20], [718000, 0x42], [719000, 0x80],
        
        //Step6 13~14
        [720000, 0x11], [721000, 0x20], [730000, 0x42], [731000, 0x80],
        [735000, 0x11], [736000, 0x20], [745000, 0x42], [746000, 0x80],
        [750000, 0x11], [751000, 0x20], [760000, 0x42], [761000, 0x80],
        [765000, 0x11], [766000, 0x20], [775000, 0x42], [776000, 0x80],
        
        [780000, 0x11], [781000, 0x20], [790000, 0x42], [791000, 0x80],
        [795000, 0x11], [796000, 0x20], [805000, 0x42], [806000, 0x80],
        [810000, 0x11], [811000, 0x20], [820000, 0x42], [821000, 0x80],
        [825000, 0x11], [826000, 0x20], [835000, 0x42], [836000, 0x80],
        
        //Step7 15~17
        [840000, 0x11], [841000, 0x20], [844000, 0x42], [845000, 0x80],
        [846000, 0x11], [847000, 0x20], [850000, 0x42], [851000, 0x80],
        [852000, 0x11], [853000, 0x20], [856000, 0x42], [857000, 0x80],
        [858000, 0x11], [859000, 0x20], [862000, 0x42], [863000, 0x80],
        [864000, 0x11], [865000, 0x20], [868000, 0x42], [869000, 0x80],
        [870000, 0x11], [871000, 0x20], [874000, 0x42], [875000, 0x80],
        [876000, 0x11], [877000, 0x20], [880000, 0x42], [881000, 0x80],
        [882000, 0x11], [883000, 0x20], [886000, 0x42], [887000, 0x80],
        [888000, 0x11], [889000, 0x20], [892000, 0x42], [893000, 0x80],
        [894000, 0x11], [895000, 0x20], [898000, 0x42], [899000, 0x80],
        
        [900000, 0x11], [901000, 0x20], [904000, 0x42], [905000, 0x80],
        [906000, 0x11], [907000, 0x20], [910000, 0x42], [911000, 0x80],
        [912000, 0x11], [913000, 0x20], [916000, 0x42], [917000, 0x80],
        [918000, 0x11], [919000, 0x20], [922000, 0x42], [923000, 0x80],
        [924000, 0x11], [925000, 0x20], [928000, 0x42], [929000, 0x80],
        [930000, 0x11], [931000, 0x20], [934000, 0x42], [935000, 0x80],
        [936000, 0x11], [937000, 0x20], [940000, 0x42], [941000, 0x80],
        [942000, 0x11], [943000, 0x20], [946000, 0x42], [947000, 0x80],
        [948000, 0x11], [949000, 0x20], [952000, 0x42], [953000, 0x80],
        [954000, 0x11], [955000, 0x20], [958000, 0x42], [959000, 0x80],
        
        [960000, 0x11], [961000, 0x20], [964000, 0x42], [965000, 0x80],
        [966000, 0x11], [967000, 0x20], [970000, 0x42], [971000, 0x80],
        [972000, 0x11], [973000, 0x20], [976000, 0x42], [977000, 0x80],
        [978000, 0x11], [979000, 0x20], [982000, 0x42], [983000, 0x80],
        [984000, 0x11], [985000, 0x20], [988000, 0x42], [989000, 0x80],
        [990000, 0x11], [991000, 0x20], [994000, 0x42], [995000, 0x80],
        [996000, 0x11], [997000, 0x20], [1000000, 0x42], [1001000, 0x80],
        [1002000, 0x11], [1003000, 0x20], [1006000, 0x42], [1007000, 0x80],
        [1008000, 0x11], [1009000, 0x20], [1012000, 0x42], [1013000, 0x80],
        [1014000, 0x11], [1015000, 0x20], [1018000, 0x42], [1019000, 0x80],
        
        //Step8 18~19
        [1020000, 0x11], [1021000, 0x20], [1030000, 0x42], [1031000, 0x80],
        [1035000, 0x11], [1036000, 0x20], [1045000, 0x42], [1046000, 0x80],
        [1050000, 0x11], [1051000, 0x20], [1060000, 0x42], [1061000, 0x80],
        [1065000, 0x11], [1066000, 0x20], [1075000, 0x42], [1076000, 0x80],
        
        [1080000, 0x11], [1081000, 0x20], [1090000, 0x42], [1091000, 0x80],
        [1095000, 0x11], [1096000, 0x20], [1105000, 0x42], [1106000, 0x80],
        [1110000, 0x11], [1111000, 0x20], [1120000, 0x42], [1121000, 0x80],
        [1125000, 0x11], [1126000, 0x20], [1135000, 0x42], [1136000, 0x80],
        
        //Step9 20
        [1140000, 0x11], [1141000, 0x20], [1198000, 0x42], [1199000, 0x80],
        
        //End DeInit
        [1200000, 0x00]
    ]
    
    ///////////////////////////////////////////////////////////////////////////////////////////////////////
    // 放松身体
    let mRelaxOn1 = Data([0x74, 0x07, 0x01, 0x75])
    let mRelaxOff1 = Data([0x74, 0x07, 0x02, 0x75])
    let mRelaxOn2 = Data([0x74, 0x07, 0x03, 0x75])
    let mRelaxOff2 = Data([0x74, 0x07, 0x04, 0x75])
    let mRelaxOn3 = Data([0x74, 0x07, 0x05, 0x75])
    let mRelaxOff3 = Data([0x74, 0x07, 0x06, 0x75])
    let mRelaxOn4 = Data([0x74, 0x07, 0x07, 0x75])
    let mRelaxOff4 = Data([0x74, 0x07, 0x08, 0x75])
    let mRelaxOn5 = Data([0x74, 0x07, 0x09, 0x75])
    let mRelaxOff5 = Data([0x74, 0x07, 0x0a, 0x75])
    let mRelaxOn6 = Data([0x74, 0x07, 0x0b, 0x75])
    let mRelaxOff6 = Data([0x74, 0x07, 0x0c, 0x75])
    let mRelaxOn7 = Data([0x74, 0x07, 0x0d, 0x75])
    let mRelaxOff7 = Data([0x74, 0x07, 0x0e, 0x75])
    
    // 小阶段的时间点
    let mRelaxSubStepTime = [
        0, 120000, 240000, 480000, 720000, 900000, 1080000
    ]
    
    // 电压缓慢上升的时间点
    let mRelaxSlowlyOnTime = [
        10300, 120300, 240300, 480300, 720300, 900300, 1080300
    ]
    
    // 电压缓慢下降的时间点
    let mRelaxSlowlyOffTime = [
        116000, 236000, 473000, 713000, 891000, 1071000, 1196000
    ]
    
    // 每个具体动作的时间点
    let mRelaxTime = [
        //Step1 1~2
        [1000, 0x11], [2000, 0x20], [8000, 0x42], [9000, 0x80],
        [10000, 0x11], [11000, 0x20], [118000, 0x42], [119000, 0x80],
        
        //Step2 3~4
        [120000, 0x11], [121000, 0x20], [126000, 0x42], [127000, 0x80],
        [128000, 0x11], [129000, 0x20], [130000, 0x42], [131000, 0x80],
        [132000, 0x11], [133000, 0x20], [134000, 0x42], [135000, 0x80],
        [136000, 0x11], [137000, 0x20], [138000, 0x42], [139000, 0x80],
        [140000, 0x11], [141000, 0x20], [142000, 0x42], [143000, 0x80],
        [144000, 0x11], [145000, 0x20], [146000, 0x42], [147000, 0x80],
        [148000, 0x11], [149000, 0x20], [150000, 0x42], [151000, 0x80],
        [152000, 0x11], [153000, 0x20], [154000, 0x42], [155000, 0x80],
        [156000, 0x11], [157000, 0x20], [158000, 0x42], [159000, 0x80],
        [160000, 0x11], [161000, 0x20], [162000, 0x42], [163000, 0x80],
        [164000, 0x11], [165000, 0x20], [166000, 0x42], [167000, 0x80],
        [168000, 0x11], [169000, 0x20], [170000, 0x42], [171000, 0x80],
        [172000, 0x11], [173000, 0x20], [174000, 0x42], [175000, 0x80],
        [176000, 0x11], [177000, 0x20], [178000, 0x42], [179000, 0x80],
        
        [180000, 0x11], [181000, 0x20], [182000, 0x42], [183000, 0x80],
        [184000, 0x11], [185000, 0x20], [186000, 0x42], [187000, 0x80],
        [188000, 0x11], [189000, 0x20], [190000, 0x42], [191000, 0x80],
        [192000, 0x11], [193000, 0x20], [194000, 0x42], [195000, 0x80],
        [196000, 0x11], [197000, 0x20], [198000, 0x42], [199000, 0x80],
        [200000, 0x11], [201000, 0x20], [202000, 0x42], [203000, 0x80],
        [204000, 0x11], [205000, 0x20], [206000, 0x42], [207000, 0x80],
        [208000, 0x11], [209000, 0x20], [210000, 0x42], [211000, 0x80],
        [212000, 0x11], [213000, 0x20], [214000, 0x42], [215000, 0x80],
        [216000, 0x11], [217000, 0x20], [218000, 0x42], [219000, 0x80],
        [220000, 0x11], [221000, 0x20], [222000, 0x42], [223000, 0x80],
        [224000, 0x11], [225000, 0x20], [226000, 0x42], [227000, 0x80],
        [228000, 0x11], [229000, 0x20], [230000, 0x42], [231000, 0x80],
        [232000, 0x11], [233000, 0x20], [238000, 0x42], [239000, 0x80],
        
        //Step3 5~8
        [240000, 0x11], [241000, 0x20], [250000, 0x42], [251000, 0x80],
        [255000, 0x11], [256000, 0x20], [265000, 0x42], [266000, 0x80],
        [270000, 0x11], [271000, 0x20], [280000, 0x42], [281000, 0x80],
        [285000, 0x11], [286000, 0x20], [295000, 0x42], [296000, 0x80],
        
        [300000, 0x11], [301000, 0x20], [310000, 0x42], [311000, 0x80],
        [315000, 0x11], [316000, 0x20], [325000, 0x42], [326000, 0x80],
        [330000, 0x11], [331000, 0x20], [340000, 0x42], [341000, 0x80],
        [345000, 0x11], [346000, 0x20], [355000, 0x42], [356000, 0x80],
        
        [360000, 0x11], [361000, 0x20], [370000, 0x42], [371000, 0x80],
        [375000, 0x11], [376000, 0x20], [385000, 0x42], [386000, 0x80],
        [390000, 0x11], [391000, 0x20], [400000, 0x42], [401000, 0x80],
        [405000, 0x11], [406000, 0x20], [415000, 0x42], [416000, 0x80],
        
        [420000, 0x11], [421000, 0x20], [430000, 0x42], [431000, 0x80],
        [435000, 0x11], [436000, 0x20], [445000, 0x42], [446000, 0x80],
        [450000, 0x11], [451000, 0x20], [460000, 0x42], [461000, 0x80],
        [465000, 0x11], [466000, 0x20], [475000, 0x42], [476000, 0x80],
        
        //Step4 9~12
        [480000, 0x11], [481000, 0x20], [490000, 0x42], [491000, 0x80],
        [495000, 0x11], [496000, 0x20], [505000, 0x42], [506000, 0x80],
        [510000, 0x11], [511000, 0x20], [520000, 0x42], [521000, 0x80],
        [525000, 0x11], [526000, 0x20], [535000, 0x42], [536000, 0x80],
        
        [540000, 0x11], [541000, 0x20], [550000, 0x42], [551000, 0x80],
        [555000, 0x11], [556000, 0x20], [565000, 0x42], [566000, 0x80],
        [570000, 0x11], [571000, 0x20], [580000, 0x42], [581000, 0x80],
        [585000, 0x11], [586000, 0x20], [595000, 0x42], [596000, 0x80],
        
        [600000, 0x11], [601000, 0x20], [610000, 0x42], [611000, 0x80],
        [615000, 0x11], [616000, 0x20], [625000, 0x42], [626000, 0x80],
        [630000, 0x11], [631000, 0x20], [640000, 0x42], [641000, 0x80],
        [645000, 0x11], [646000, 0x20], [655000, 0x42], [656000, 0x80],
        
        [660000, 0x11], [661000, 0x20], [670000, 0x42], [671000, 0x80],
        [675000, 0x11], [676000, 0x20], [685000, 0x42], [686000, 0x80],
        [690000, 0x11], [691000, 0x20], [700000, 0x42], [701000, 0x80],
        [705000, 0x11], [706000, 0x20], [715000, 0x42], [716000, 0x80],
        
        //Step5 13~15
        [720000, 0x11], [721000, 0x20], [733000, 0x42], [734000, 0x80],
        [740000, 0x11], [741000, 0x20], [753000, 0x42], [754000, 0x80],
        [760000, 0x11], [761000, 0x20], [773000, 0x42], [774000, 0x80],
        
        [780000, 0x11], [781000, 0x20], [793000, 0x42], [794000, 0x80],
        [800000, 0x11], [801000, 0x20], [813000, 0x42], [814000, 0x80],
        [820000, 0x11], [821000, 0x20], [833000, 0x42], [834000, 0x80],
        
        [840000, 0x11], [841000, 0x20], [853000, 0x42], [854000, 0x80],
        [860000, 0x11], [861000, 0x20], [873000, 0x42], [874000, 0x80],
        [880000, 0x11], [881000, 0x20], [893000, 0x42], [894000, 0x80],
        
        //Step6 16~18
        [900000, 0x11], [901000, 0x20], [913000, 0x42], [914000, 0x80],
        [920000, 0x11], [921000, 0x20], [933000, 0x42], [934000, 0x80],
        [940000, 0x11], [941000, 0x20], [953000, 0x42], [954000, 0x80],
        
        [960000, 0x11], [961000, 0x20], [973000, 0x42], [974000, 0x80],
        [980000, 0x11], [981000, 0x20], [993000, 0x42], [994000, 0x80],
        [1000000, 0x11], [1001000, 0x20], [1013000, 0x42], [1014000, 0x80],
        
        [1020000, 0x11], [1021000, 0x20], [1033000, 0x42], [1034000, 0x80],
        [1040000, 0x11], [1041000, 0x20], [1053000, 0x42], [1054000, 0x80],
        [1060000, 0x11], [1061000, 0x20], [1073000, 0x42], [1074000, 0x80],
        
        //Step7 19~20
        [1080000, 0x11], [1081000, 0x20], [1198000, 0x42], [1199000, 0x80],
        
        //End DeInit
        [1200000, 0x00]
    ]

    let MSG_SET_CTRL2_EXTTEND = 6002 // 先发左侧5组开关状态后，需要再发右侧5组开关状态
    let MSG_SET_PROGRESS_UP = 6003 // 电压缓慢上升
    let MSG_SET_PROGRESS_DOWN = 6004 // 电压缓慢下降
    let MSG_DEINIT_EXTEND = 6005 // 结束指令2
    let MSG_SET_SEEKBAR = 6006
    
    let handle = FFCommandHandle()
    
    init(delegate: FFExerciseModelServiceDelegate) {
        self.delegate = delegate
        super.init()
        startKVO()
        registerNotification()
    }
    
    deinit {
        endKVO()
        unregisterNotification()
    }
    
    /// 开始KVO监听BLE连接状态
    private func startKVO() {
        FFBaseModel.sharedInstall.addObserver(self, forKeyPath: bleConnectStatusKeyPath, options: .new, context: nil)
    }
    
    /// 结束KVO监听BLE连接状态
    private func endKVO() {
        FFBaseModel.sharedInstall.removeObserver(self, forKeyPath: bleConnectStatusKeyPath)
    }
    
    override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
        if keyPath == bleConnectStatusKeyPath {
            delegate?.callbackForBLEState(FFBaseModel.sharedInstall.bleConnectStatus >= 2)
        } else {
            super.observeValue(forKeyPath: keyPath, of: object, change: change, context: context)
        }
    }
    
    private func registerNotification() {
        NotificationCenter.default.addObserver(self, selector: #selector(handleNotification(notification:)), name: FFExerciseModelServiceNotification, object: nil)
    }
    
    private func unregisterNotification() {
        NotificationCenter.default.removeObserver(self)
    }
    
    @objc func handleNotification(notification: Notification) {
        guard let obj = notification.object as? String else {
            return
        }
        if obj == ACTION_CHANGE_SINGLE_POWER {
            guard let userInfo = notification.userInfo as? [String : Any] else {
                return
            }
            let value = userInfo[ACTION_SINGLE_INDEX_EXTRA] as? Int ?? -1
            if FFBaseModel.sharedInstall.bleConnectStatus == 3 &&
                FFBaseModel.sharedInstall.commandReady &&
                FFBaseModel.sharedInstall.mCountDownTimeState != 0 &&
                value != -1 {
                mPowerValueArray[value][2] = mCtrlPowerValueArray[value]
                handle.writeData(mPowerValueArray[value])
            }
        } else if obj == ACTION_CHANGE_CTRL_ARRAY {
            if FFBaseModel.sharedInstall.bleConnectStatus == 3 &&
                FFBaseModel.sharedInstall.commandReady &&
                FFBaseModel.sharedInstall.mCountDownTimeState != 0 {
                handle.writeData(mCtrlArray1)
                NSObject.cancelPreviousPerformRequests(withTarget: self, selector: #selector(handleMessage2(what:)), object: MSG_SET_CTRL2_EXTTEND)
                perform(#selector(handleMessage2(what:)), with: MSG_SET_CTRL2_EXTTEND, afterDelay: 0.05)
            }
        }
    }
}

